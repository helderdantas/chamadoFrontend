(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{3424:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/suport/relatorio",function(){return n(2305)}])},2305:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(4051),a=n.n(r),s=n(5893),o=n(7294),c=n(3547),i=n(6887),u=[["Element","",{role:"style"}],["Total de Chamados",100,"#b87333"]];function l(e){return u[1][1]=e.total,(0,s.jsx)(i.kL,{chartType:"ColumnChart",width:"100%",height:"400px",data:u})}function d(e){var t=e.data;return(0,s.jsx)(i.kL,{chartType:"PieChart",data:t,options:e,width:"100%",height:"400px"})}var h=n(3343),p=n(9198),f=n.n(p);n(5828);function m(e){return(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"\n                text-gray-200\n                bg-gradient-to-r from-gray-500 to-gray-600\n            \n            ",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left p-3",children:"Setor"}),(0,s.jsx)("th",{className:"text-left p-3",children:"Quantidade de Chamados"})]})}),(0,s.jsx)("tbody",{children:function(){var t,n=0;return null===(t=e.nome)||void 0===t?void 0:t.map((function(t,r){if(e.size[r])return n++,(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("tr",{className:"".concat(n%2===0?"bg-gray-400":"bg-gray-300"),children:[(0,s.jsx)("td",{className:"text-left p-2",children:e.nome[r]}),(0,s.jsx)("td",{className:"text-left p-2",children:e.size[r]})]},r)})}))}()})]})}var x=n(4680),j=n(6785);function y(e,t,n,r,a,s,o){try{var c=e[s](o),i=c.value}catch(u){return void n(u)}c.done?t(i):j.Promise.resolve(i).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new j.Promise((function(r,a){var s=e.apply(t,n);function o(e){y(s,r,a,o,c,"next",e)}function c(e){y(s,r,a,o,c,"throw",e)}o(void 0)}))}}var g=n(9669);function w(){var e=function(e){return e?(0,s.jsx)(f(),{selected:S,onChange:function(e){return k(e)},dateFormat:"dd/MM/yyyy",showYearDropdown:!0,maxDate:new Date,scrollableMonthYearDropdown:!0,placeholderText:"Click para selecionar a data"}):(0,s.jsx)(f(),{selected:C,onChange:function(e){return _(e)},dateFormat:"dd/MM/yyyy",showYearDropdown:!0,maxDate:new Date,scrollableMonthYearDropdown:!0,placeholderText:"Click para selecionar a data"})},t=(new x.Z,new c.Z),n=(0,o.useState)({nomeSetor:[],quantidade:[]}),r=n[0],i=n[1],u=(0,o.useState)([]),p=u[0],y=u[1],w=(0,o.useState)([]),N=w[0],b=w[1],D=(0,o.useState)(new Date),S=D[0],k=D[1],E=(0,o.useState)(new Date),C=E[0],_=E[1],P=(0,o.useState)(0),T=P[0],M=P[1],F=S.getFullYear()+"-"+(S.getMonth()+1)+"-"+S.getDate()+" 00:00:00.000-03",O=C.getFullYear()+"-"+(C.getMonth()+1)+"-"+C.getDate()+" 23:59:59.999-03";function Y(e,t){return q.apply(this,arguments)}function q(){return(q=v(a().mark((function e(n,r){var s,o,c,u,l,d,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("".concat("http://localhost:3030/","listarSetoresAtivos"));case 2:return s=e.sent,o=s.data.map((function(e){return e.nome})),c=o.map((function(e){return t.chamadosPorSetor(e,n,r)})),e.next=7,j.Promise.all(c);case 7:return u=e.sent,l=[],d=[],Object.keys(u).forEach((function(e){l.push(u[e].nome),d.push(u[e].size)})),h=d.reduce((function(e,t){return e+t})),M(h),i({nomeSetor:l,quantidade:d}),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return z.apply(this,arguments)}function z(){return(z=v(a().mark((function e(n,r){var s,o,c,i,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("".concat("http://localhost:3030/","listarEquipeSuportAtivos"));case 2:return s=e.sent,o=s.data.map((function(e){return e.nome})),c=o.map((function(e){return t.chamadosPorSuport(e,n,r)})),e.next=7,j.Promise.all(c);case 7:return i=e.sent,u=[["Task","Hours per Day"]],Object.keys(i).forEach((function(e){i[e][1]&&u.push(i[e])})),y(u),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return H.apply(this,arguments)}function H(){return(H=v(a().mark((function e(n,r){var s,o,c,i,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("".concat("http://localhost:3030/","listarEquipamentosAtivos"));case 2:return s=e.sent,o=s.data.map((function(e){return e.nome})),c=o.map((function(e){return t.chamadosPorTipoEquipamento(e,n,r)})),e.next=7,j.Promise.all(c);case 7:return i=e.sent,u=[["Task","Hours per Day"]],Object.keys(i).forEach((function(e){i[e][1]&&u.push(i[e])})),b(u),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,o.useEffect)((function(){var e=1;if(e){var t=C.getFullYear()+"-01-01 00:00:00.000-03",n=C.getFullYear()+"-12-31 23:59:59.999-03";Y(t,n),A(t,n),R(t,n),e=0}else Y(F,O)}),[]),(0,s.jsx)("div",{className:"\n            flex justify-center  items-end  min-h-screen  max-h-full\n            bg-gradient-to-r from-slate-400 to-slate-500 text-neutral-50 \n            ",children:(0,s.jsxs)(h.Z,{titulo:"RELAT\xd3RIOS DE CHAMADOS GERADOS",children:[(0,s.jsxs)("div",{className:"grid grap-2 grid-cols-4",children:[(0,s.jsxs)("div",{className:"px-2 py-2",children:[(0,s.jsx)("h2",{className:"text-xl",children:"Data inicial:"}),e(!0)]}),(0,s.jsxs)("div",{className:"px-2 py-2",children:[(0,s.jsx)("h2",{className:"text-xl",children:"Data Final:"}),e(!1)]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:" absolute bg-blue-800 text-white px-2 py-4 rounded-md",onClick:function(){Y(F,O),A(F,O),R(F,O)},children:(0,s.jsx)("h2",{className:"text-xl",children:"Gerar Rel\xe1torio"})})})]}),(0,s.jsx)("hr",{className:"border-2 border-gray-600"}),(0,s.jsx)("div",{className:"ustify-center",children:(0,s.jsx)(l,{total:T})}),(0,s.jsxs)("div",{className:"justify-center grid grap-1 grid-cols-2",children:[(0,s.jsx)(d,{title:"Chamados por Suporte",data:p}),(0,s.jsx)(d,{title:"Chamados por Equipamento",data:N})]}),(0,s.jsx)("div",{className:"justify-center",children:(0,s.jsx)(m,{nome:r.nomeSetor,size:r.quantidade})})]})})}}},function(e){e.O(0,[961,669,170,487,774,888,179],(function(){return t=3424,e(e.s=t);var t}));var t=e.O();_N_E=t}]);